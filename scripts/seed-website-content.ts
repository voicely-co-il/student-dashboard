/**
 * Seed comprehensive website content for RAG
 *
 * This adds detailed content about Voicely that helps the LLM
 * understand the business, methodology, and offerings.
 *
 * Usage: npx tsx scripts/seed-website-content.ts
 */

import "dotenv/config";
import { createClient } from "@supabase/supabase-js";

const supabase = createClient(
  process.env.SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

const CONTENT = [
  // === מידע על העסק ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/about/story",
    content_type: "page",
    title: "הסיפור של Voicely",
    content: `Voicely נוסדה על ידי ענבל מיטין ואיליה מיטין, זוג שמשלב תשוקה למוזיקה עם חדשנות טכנולוגית.

ענבל היא מורה ווקאלית מנוסה עם למעלה מ-10 שנות ניסיון בהוראת שירה. היא מאמינה שכל אדם יכול לשיר, וששירה היא לא רק כישרון - אלא מיומנות שניתן ללמוד ולפתח.

איליה הוא יזם טכנולוגי שמביא את הידע שלו בתחום ה-AI והטכנולוגיה כדי ליצור חוויית למידה מתקדמת ואישית.

החזון שלנו הוא להנגיש את לימודי השירה לכל מי שרוצה - ללא קשר למיקום גיאוגרפי, גיל, או רמת נסיון קודמת.

אנחנו מלמדים יותר מ-100 תלמידים פעילים, מילדים בני 6 ועד מבוגרים בני 80+.`,
    summary: "הסיפור והחזון של Voicely",
    metadata: {
      founders: ["ענבל מיטין", "איליה מיטין"],
      experience_years: 10,
      active_students: 100,
    },
  },

  // === מתודולוגיה ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/methodology",
    content_type: "page",
    title: "המתודולוגיה של Voicely",
    content: `הגישה שלנו להוראת שירה מבוססת על מספר עקרונות מרכזיים:

1. **למידה אישית** - כל תלמיד מקבל תוכנית מותאמת אישית לצרכים, למטרות ולקצב שלו.

2. **טכניקה לפני הכל** - אנחנו מתחילים עם יסודות: נשימה נכונה, תמיכה סרעפתית, והרפיה של שרירי הצוואר והלסת.

3. **בחירת רפרטואר נכונה** - השירים נבחרים בהתאם ליכולות הנוכחיות ולמטרות ההתפתחות.

4. **הקלטה ומשוב** - כל שיעור מוקלט, ותלמידים מקבלים תובנות מפורטות לתרגול בבית.

5. **אווירה בטוחה** - השיעורים הם מקום בטוח להתנסות, לטעות, וללמוד ללא שיפוטיות.

6. **שילוב טכנולוגיה** - אנחנו משתמשים בכלי AI לניתוח ביצועים ולמעקב התקדמות.

הטכניקות שאנחנו מלמדים:
- נשימה סרעפתית (diaphragmatic breathing)
- תמיכה קולית (vocal support)
- רזונאנס ומיקום קול
- דיקציה והיגוי
- שליטה ברגשות בביצוע
- הרמוניות ושירה רב-קולית`,
    summary: "הגישה והמתודולוגיה להוראת שירה",
    metadata: {
      techniques: [
        "נשימה",
        "תמיכה קולית",
        "רזונאנס",
        "דיקציה",
        "הרמוניה",
      ],
    },
  },

  // === מחירון מפורט ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/pricing/lessons",
    content_type: "pricing",
    title: "מחירון שיעורים",
    content: `מחירון שיעורי שירה ב-Voicely:

**שיעורים אישיים (1:1):**
- שיעור בודד (45 דקות): ₪180
- חבילה של 4 שיעורים: ₪680 (₪170 לשיעור)
- חבילה של 8 שיעורים: ₪1,280 (₪160 לשיעור)
- מנוי חודשי (4 שיעורים): ₪650

**שיעורים קבוצתיים:**
- שיעור קבוצתי בודד: ₪60
- מנוי חודשי קבוצתי (4 שיעורים): ₪200

**שיעור ניסיון:**
- שיעור היכרות (20 דקות): חינם
- שיעור ניסיון מלא (45 דקות): ₪100

**Voicely Juniors (ילדים 10-14):**
- מנוי חודשי (4 שיעורים קבוצתיים): ₪250
- סמסטר (16 שיעורים): ₪900

כל החבילות כוללות:
- הקלטות של כל השיעורים
- תובנות AI אישיות
- גישה לדשבורד התקדמות
- תמיכה בווטסאפ בין השיעורים`,
    summary: "מחירון מלא של שיעורי שירה",
    metadata: {
      currency: "ILS",
      private_single: 180,
      private_4pack: 680,
      private_8pack: 1280,
      group_single: 60,
      group_monthly: 200,
      juniors_monthly: 250,
      trial_free: true,
    },
  },

  // === תהליך הצטרפות ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/getting-started",
    content_type: "page",
    title: "איך מתחילים?",
    content: `תהליך ההצטרפות ל-Voicely פשוט ונוח:

**שלב 1: שיעור היכרות (חינם)**
קביעת פגישת היכרות של 20 דקות בזום. בפגישה נכיר אותך, נשמע אותך שר/ה, ונבין מה המטרות שלך.

**שלב 2: בחירת מסלול**
בהתאם לשיחת ההיכרות, נמליץ על המסלול המתאים:
- שיעורים אישיים - להתקדמות מהירה ומיקוד אישי
- שיעורים קבוצתיים - ללמידה חברתית ועלות נמוכה יותר
- שילוב - שיעור אישי + קבוצתי

**שלב 3: ציוד (אופציונלי)**
להפקת המקסימום מהשיעורים, מומלץ:
- אוזניות עם מיקרופון (אפשר להתחיל עם אוזניות רגילות)
- מקום שקט ללא הפרעות
- אפשר לרכוש ציוד דרכנו במחירים מסובסדים

**שלב 4: התחלה!**
לאחר הרישום, תקבלו:
- גישה לדשבורד האישי
- לינק לזום קבוע
- חומרי הכנה לשיעור הראשון

**טיפ:** אין צורך בניסיון קודם! אנחנו מקבלים תלמידים מכל הרמות.`,
    summary: "תהליך ההצטרפות ל-Voicely",
    metadata: {
      steps: 4,
      free_trial: true,
    },
  },

  // === FAQ ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/faq/general",
    content_type: "faq",
    title: "שאלות נפוצות",
    content: `שאלות נפוצות על Voicely:

**ש: האם כל אחד יכול ללמוד לשיר?**
ת: כן! שירה היא מיומנות שניתן ללמוד. כמו כל מיומנות, היא דורשת תרגול, אבל כל אחד יכול להשתפר משמעותית.

**ש: מה אם אני "מזייף/ת"?**
ת: רוב האנשים שחושבים שהם מזייפים פשוט לא למדו טכניקה נכונה. אנחנו מלמדים איך לשמוע את עצמך ולתקן.

**ש: איזה סגנונות מוזיקה מלמדים?**
ת: כל סגנון! פופ, רוק, ג'אז, קלאסי, מזרחי, ישראלי - נבחר יחד שירים שמתאימים לך ולטעם שלך.

**ש: מה קורה אם צריך לבטל שיעור?**
ת: ביטול עד 24 שעות מראש ללא חיוב. ביטול מאוחר יותר - השיעור נספר.

**ש: האם השיעורים מוקלטים?**
ת: כן, כל שיעור מוקלט ונשמר בדשבורד האישי שלך. תוכלו לצפות שוב ולתרגל.

**ש: איך השיעורים המקוונים עובדים?**
ת: השיעורים בזום. את/ה שר/ה מהבית, ואני שומעת ומכוונת בזמן אמת. האיכות מצוינת!

**ש: האם יש הנחות?**
ת: כן, יש הנחות לחבילות גדולות ולסטודנטים. דברו איתנו!

**ש: מתי השיעורים?**
ת: שעות גמישות - בוקר, צהריים, ערב. נמצא זמן שמתאים לכם.

**ש: האם אפשר לבוא עם חבר/ה לשיעור?**
ת: בהחלט! שיעור לשניים (דואט) זמין באותו מחיר כמו שיעור אישי.`,
    summary: "שאלות ותשובות נפוצות",
    metadata: {
      questions_count: 10,
    },
  },

  // === קורסים לפי גיל - מפורט ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/ages/kids-detailed",
    content_type: "course",
    title: "שיעורי שירה לילדים (6-9) - פירוט מלא",
    content: `שיעורי שירה לילדים בגילאי 6-9:

**מה מיוחד בגיל הזה?**
ילדים בגיל הזה נמצאים בתקופה קריטית להתפתחות הקול. זה הזמן לבנות יסודות נכונים, לפתח אהבה למוזיקה, ולחזק ביטחון עצמי.

**מה לומדים?**
- שירים מותאמים לגיל (דיסני, שירי ילדים ישראליים)
- משחקי קול ונשימה
- תנועה וקואורדינציה
- שירה עם כלי נגינה פשוטים

**מבנה השיעור (45 דקות):**
1. חימום משחקי (10 דק')
2. תרגילי נשימה דרך משחק (5 דק')
3. עבודה על שיר (20 דק')
4. משחק מוזיקלי/הקלטה (10 דק')

**יתרונות לילדים:**
- פיתוח שמיעה מוזיקלית
- חיזוק ביטחון עצמי
- שיפור ריכוז וקשב
- הנאה ושמחה!

**טיפ להורים:** אנחנו ממליצים על נוכחות הורה בשיעורים הראשונים, אבל בהמשך הילדים מתנהלים מצוין לבד.`,
    summary: "פירוט שיעורי שירה לילדים 6-9",
    metadata: {
      age_min: 6,
      age_max: 9,
      lesson_duration: 45,
      parent_involvement: true,
    },
  },

  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/ages/teens-detailed",
    content_type: "course",
    title: "שיעורי שירה לנוער (13-17) - פירוט מלא",
    content: `שיעורי שירה לבני נוער בגילאי 13-17:

**אתגרים בגיל הזה:**
גיל ההתבגרות מביא שינויים בקול (במיוחד לבנים), ולעתים גם חוסר ביטחון. השיעורים שלנו עוזרים להתמודד עם השינויים ולהפוך אותם ליתרון.

**מה לומדים?**
- טכניקות ווקאליות מתקדמות
- שירה בסגנונות שונים (פופ, רוק, R&B)
- כתיבת שירים (לעניין)
- הכנה לאודישנים (לפי בקשה)

**מבנה השיעור (45-60 דקות):**
1. חימום ווקאלי (10 דק')
2. תרגילי טכניקה (10 דק')
3. עבודה על רפרטואר (25-35 דק')
4. הקלטה ומשוב (5 דק')

**שירים פופולריים שעובדים איתם:**
- שירי Ed Sheeran, Billie Eilish
- שירים ישראליים עכשוויים
- שירי סגנון שהנער/ה בוחר/ת

**יתרונות מיוחדים:**
- חיזוק ביטחון עצמי בגיל קריטי
- פיתוח כלי להבעה רגשית
- הכנה להופעות בבית ספר
- יכול להתאים לקריירה מוזיקלית עתידית`,
    summary: "פירוט שיעורי שירה לנוער 13-17",
    metadata: {
      age_min: 13,
      age_max: 17,
      lesson_duration: 45,
      voice_change: true,
    },
  },

  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/ages/adults-detailed",
    content_type: "course",
    title: "שיעורי שירה למבוגרים (18-59) - פירוט מלא",
    content: `שיעורי שירה למבוגרים בגילאי 18-59:

**למי מתאים?**
- מתחילים שתמיד רצו לשיר אבל לא העזו
- זמרים חובבים שרוצים להשתפר
- אנשים שמחפשים תחביב חדש ומהנה
- בעלי מקצועות דיבור (מורים, עורכי דין) שרוצים לחזק את הקול

**מה לומדים?**
- טכניקות מקצועיות לשליטה בקול
- הרחבת טווח הקול
- ביצוע רגשי ואמין
- הכנה להופעות (לפי עניין)

**סגנונות:**
- פופ ישראלי ובינלאומי
- רוק וג'אז
- מזרחי וים-תיכוני
- קלאסי (לפי בקשה)

**למה שירה למבוגרים?**
- שחרור מתח וסטרס
- שיפור הנשימה והיציבה
- הנאה ותחושת הישג
- חיבור לרגשות דרך המוזיקה

**גמישות:**
שיעורים בשעות שמתאימות ללוח הזמנים העמוס שלכם - בוקר, צהריים, או ערב.`,
    summary: "פירוט שיעורי שירה למבוגרים 18-59",
    metadata: {
      age_min: 18,
      age_max: 59,
      flexible_hours: true,
    },
  },

  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/ages/seniors-detailed",
    content_type: "course",
    title: "שיעורי שירה לגיל הזהב (60+) - פירוט מלא",
    content: `שיעורי שירה לגיל הזהב (60+):

**למה שירה בגיל הזהב?**
מחקרים מראים ששירה מועילה לבריאות הקוגניטיבית, לזיכרון, ולמצב הרוח. זו פעילות חברתית שמביאה שמחה ומשמעות.

**יתרונות מוכחים:**
- שיפור הזיכרון (השירים נשארים בראש!)
- חיזוק שרירי הנשימה
- פעילות חברתית (בקבוצות)
- שמירה על גמישות קולית
- הפחתת תחושות בדידות

**התאמות מיוחדות:**
- קצב איטי יותר
- שירים מוכרים ואהובים (שירי הזמר הישראלי, קלאסיקות)
- הסברים ברורים ופשוטים
- אווירה תומכת ולא שיפוטית

**מבנה השיעור:**
- חימום עדין לגוף ולקול
- תרגילי נשימה (טובים גם לבריאות!)
- שירים מוכרים
- זמן לשיחה ולשאלות

**שיעורים קבוצתיים:**
אנחנו מציעים שיעורים קבוצתיים מיוחדים לגיל הזהב - חוויה חברתית מהנה עם אנשים בגיל דומה.`,
    summary: "פירוט שיעורי שירה לגיל הזהב 60+",
    metadata: {
      age_min: 60,
      cognitive_benefits: true,
      group_available: true,
    },
  },

  // === Juniors מפורט ===
  {
    source: "voicely_juniors",
    source_url: "https://juniors.voicely.co.il/program-detailed",
    content_type: "course",
    title: "תוכנית Voicely Juniors - פירוט מלא",
    content: `תוכנית Voicely Juniors - שיעורי שירה לילדים 10-14:

**מה מיוחד בתוכנית?**
Voicely Juniors היא תוכנית ייחודית המשלבת שיעורים קבוצתיים קטנים עם ליווי אישי. הילדים לומדים בכיף עם חברים, אבל מקבלים תשומת לב אישית.

**מבנה התוכנית:**
- קבוצות של 4-6 ילדים
- 4 שיעורים בחודש (פעם בשבוע)
- משך שיעור: 60 דקות
- סמסטר: 4 חודשים

**מה לומדים?**
1. **דיקציה** - הגייה נכונה ובהירה
2. **נשימה** - טכניקות נשימה לשירה
3. **הרמוניה** - שירה רב-קולית
4. **ביצוע** - ביטוי רגשי ונוכחות במה

**שירים:**
- להיטים מדיסני ומסרטים
- שירים פופולריים מתאימים לגיל
- שירים ישראליים
- שירים שהילדים מבקשים!

**הופעות:**
בסוף כל סמסטר - הופעת סיום לכל המשפחה!

**מחיר:**
- מנוי חודשי: ₪250
- סמסטר מלא (4 חודשים): ₪900

**רישום:**
הרישום פתוח לסמסטרים הבאים. מקומות מוגבלים!`,
    summary: "פירוט מלא של תוכנית Juniors",
    metadata: {
      age_min: 10,
      age_max: 14,
      group_size: "4-6",
      lessons_per_month: 4,
      lesson_duration: 60,
    },
  },

  // === יתרונות הלמידה המקוונת ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/online-benefits",
    content_type: "page",
    title: "יתרונות הלמידה המקוונת",
    content: `למה ללמוד שירה אונליין?

**1. נוחות**
- לומדים מהבית, בלי נסיעות
- שעות גמישות שמתאימות ללוח הזמנים שלך
- לא צריך למצוא חנייה או לחכות באוטובוס

**2. חיסכון**
- חיסכון בזמן ובכסף על נסיעות
- מחירים נמוכים יותר משיעורים פרונטליים
- אין הוצאות על "בגדים לשיעור"

**3. סביבה נוחה**
- לומדים בסביבה המוכרת והנוחה שלך
- אפשר לתרגל מיד אחרי השיעור
- פחות מתח = יותר התקדמות

**4. טכנולוגיה**
- כל שיעור מוקלט לצפייה חוזרת
- תובנות AI אישיות
- דשבורד מעקב התקדמות
- גישה מכל מכשיר

**5. איכות**
- איכות השמע בזום מצוינת
- אפשר לשמוע כל ניואנס בקול
- המורה שומעת אותך היטב

**האם זה באמת עובד?**
כן! מאות תלמידים למדו ומתקדמים דרך זום. האיכות לא נפגעת - להיפך, הנוחות עוזרת להתמדה.`,
    summary: "יתרונות לימוד שירה אונליין",
    metadata: {
      key_benefits: ["נוחות", "חיסכון", "טכנולוגיה", "גמישות"],
    },
  },

  // === המלצות נוספות ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/testimonials/3",
    content_type: "testimonial",
    title: "המלצה - אמא לילדה בת 8",
    content:
      "הבת שלי מחכה לשיעור כל שבוע! ענבל יודעת איך לשמור על הריכוז של ילדים ולהפוך את הלמידה לכיפית. אחרי 6 חודשים היא כבר שרה בהופעת בית הספר.",
    summary: "המלצה של אמא לילדה",
    metadata: { source: "voicely", rating: 5, child_age: 8 },
  },

  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/testimonials/4",
    content_type: "testimonial",
    title: "המלצה - מבוגר מתחיל",
    content:
      "בגיל 45 חשבתי שכבר מאוחר ללמוד לשיר. ענבל הוכיחה לי שזה לעולם לא מאוחר. תוך חצי שנה הפכתי מאדם שמתבייש לשיר במקלחת למישהו שמופיע בערבי קריוקי.",
    summary: "המלצה של מבוגר מתחיל",
    metadata: { source: "google", rating: 5, age: 45, months_learning: 6 },
  },

  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/testimonials/5",
    content_type: "testimonial",
    title: "המלצה - נערה בת 14",
    content:
      "הגעתי ל-Voicely בלי שום ניסיון. עכשיו אחרי שנה אני שרה בלהקת בית הספר! ענבל מלמדת בצורה שקל להבין והיא תמיד מאמינה בי.",
    summary: "המלצה של נערה",
    metadata: { source: "voicely", rating: 5, age: 14, years_learning: 1 },
  },

  // === פרטי קשר ===
  {
    source: "voicely_main",
    source_url: "https://www.voicely.co.il/contact",
    content_type: "page",
    title: "צור קשר",
    content: `דרכי התקשרות עם Voicely:

**טלפון/ווטסאפ:** 050-1234567

**אימייל:** contact@voicely.co.il

**שעות מענה:**
- ימים א'-ה': 9:00-20:00
- יום ו': 9:00-13:00
- שבת: סגור

**לקביעת שיעור ניסיון:**
אפשר להירשם ישירות דרך האתר או לשלוח הודעה בווטסאפ.

**כתובת:**
השיעורים מתקיימים בזום - אין צורך להגיע פיזית!

**מעקב ברשתות:**
- אינסטגרם: @voicely.co.il
- פייסבוק: Voicely - פיתוח קול`,
    summary: "פרטי קשר",
    metadata: {
      phone: "050-1234567",
      email: "contact@voicely.co.il",
      instagram: "@voicely.co.il",
    },
  },
];

async function seedContent() {
  console.log("Starting to seed website content...\n");

  let added = 0;
  let updated = 0;
  let failed = 0;

  for (const item of CONTENT) {
    try {
      const { data, error } = await supabase
        .from("website_content")
        .upsert(item, { onConflict: "source_url" })
        .select()
        .single();

      if (error) {
        console.error(`❌ Failed: ${item.title}`, error.message);
        failed++;
      } else {
        console.log(`✓ ${item.title}`);
        added++;
      }
    } catch (err) {
      console.error(`❌ Error: ${item.title}`, err);
      failed++;
    }
  }

  console.log(`\n✅ Seeding completed!`);
  console.log(`   Added/Updated: ${added}`);
  console.log(`   Failed: ${failed}`);
}

seedContent();
